<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>InternsHub - Sign Up</title>

  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Tailwind config -->
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            brand: {
              orange: "#D9653F",
              black: "#0F0F0F",
              gray: "#F1F3F5"
            }
          },
          boxShadow: {
            soft: "0 8px 30px rgba(0,0,0,0.08)"
          },
          fontFamily: {
            sans: ['Inter', 'ui-sans-serif', 'system-ui', 'Segoe UI', 'Helvetica Neue', 'Arial']
          }
        }
      }
    }
  </script>

  <!-- Inter font -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet"/>

  <style>
    html, body {
      height: 100%;
      margin: 0;
      overflow-x: hidden;
    }

    .oval-ring::after {
      content: "";
      position: absolute;
      inset: -10px -18px -8px -18px;
      border: 3px solid #D9653F;
      border-radius: 50%;
      transform: rotate(-8deg);
      pointer-events: none;
    }

    /* Hand-drawn sketch lines */
    .hand-lines {
      background-image: repeating-linear-gradient(
        0deg,
        rgba(0,0,0,0.3) 0px,
        rgba(0,0,0,0.3) 2px,
        transparent 2px,
        transparent 8px
      );
    }

    @keyframes spin-slow {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }

    /* Squiggle decoration */
    .squiggle {
      font-size: 20px;
      line-height: 1;
    }

    /* Mobile menu styles */
    .mobile-menu {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: white;
      z-index: 50;
      padding: 2rem;
    }

    .mobile-menu.active {
      display: block;
    }

    /* Profile pic preview */
    .profile-preview {
      width: 80px;
      height: 80px;
      border-radius: 50%;
      object-fit: cover;
      border: 3px solid #D9653F;
    }

    .profile-placeholder {
      width: 80px;
      height: 80px;
      border-radius: 50%;
      background: #e5e7eb;
      display: flex;
      align-items: center;
      justify-content: center;
      border: 3px dashed #9ca3af;
    }
  </style>
</head>
<body class="font-sans text-brand-black antialiased bg-brand-gray flex flex-col">

  <!-- Top navigation -->
  <header class="w-full flex-shrink-0">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 pt-4 sm:pt-5">
      <div class="flex items-center justify-between">
        <!-- Left group -->
        <div class="flex items-center gap-3 sm:gap-6">
          <!-- Logo + email -->
          <div class="flex items-center gap-2 sm:gap-3">
          <img 
            src="Images/Community logo.1.png" 
            alt="icon" 
            class="w-6 h-6 sm:w-7 sm:h-7 rounded-full bg-black/90 grid place-items-center text-white text-xs font-bold object-cover"
          />
            <a href="mailto:hello@job.io" class="hidden sm:block text-sm text-black/70 hover:text-black">Elevana</a>
          </div>

          <!-- Middle links - Desktop -->
          <nav class="hidden lg:flex items-center gap-4 xl:gap-6 text-sm text-black/70">
            <a href="#" class="hover:text-black">Top Job</a>
            <a href="#" class="hover:text-black">Resume</a>
            <a href="#" class="hover:text-black">Event</a>
          </nav>
        </div>

        <!-- Right group -->
        <div class="flex items-center gap-2 sm:gap-3">
          <a href="login.html" class="hidden sm:block text-sm text-black/70 hover:text-black">Login</a>
          <a href="signup.html" class="text-xs sm:text-sm bg-black text-white px-3 sm:px-4 py-2 rounded hover:bg-black/90">Join Now</a>
          <button id="menuToggle" class="lg:hidden w-9 h-9 grid place-items-center border border-black/10 rounded">
            <svg class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <path stroke-width="2" stroke-linecap="round" d="M4 7h16M4 12h16M4 17h16"/>
            </svg>
          </button>
        </div>
      </div>
    </div>
  </header>

  <!-- Mobile Menu -->
  <div id="mobileMenu" class="mobile-menu">
    <div class="flex justify-between items-center mb-8">
      <div class="text-xl font-bold">Menu</div>
      <button id="closeMenu" class="w-9 h-9 grid place-items-center border border-black/10 rounded">
        <svg class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <path stroke-width="2" stroke-linecap="round" d="M6 18L18 6M6 6l12 12"/>
        </svg>
      </button>
    </div>
    <nav class="flex flex-col gap-4 text-lg">
      <a href="#" class="hover:text-brand-orange">Home</a>
      <a href="#" class="hover:text-brand-orange">Rules</a>
      <a href="#" class="hover:text-brand-orange"></a>
      <a href="#" class="hover:text-brand-orange">Login</a>
      <a href="mailto:hello@job.io" class="hover:text-brand-orange">hello@job.io</a>
    </nav>
  </div>

  <!-- Split hero - Flex grow to fill screen -->
  <section class="flex-grow flex items-center py-4 sm:py-6">
    <div class="w-full max-w-7xl mx-auto px-4 sm:px-6">
      <div class="grid lg:grid-cols-2 rounded-lg overflow-hidden h-full min-h-[500px] lg:min-h-[600px]">

        <!-- Left panel - Sign Up Form -->
        <div class="bg-brand-gray p-6 sm:p-8 lg:p-12 flex flex-col justify-center overflow-y-auto">
          <!-- Breadcrumb -->
          <div class="text-xs sm:text-sm text-black/60 mb-4 sm:mb-6">Create Your Account</div>

          <!-- Headline -->
          <h1 class="text-3xl sm:text-4xl lg:text-5xl xl:text-6xl font-extrabold leading-tight text-black">
            Join Us
            <span class="relative inline-block ">Today!</span>
          </h1>

          <!-- Subcopy -->
          <p class="mt-3 sm:mt-4 text-sm sm:text-base text-black/70 max-w-xl">
            Create your account to start your <span class="font-semibold text-black">Internship Journey</span> and unlock amazing opportunities.
          </p>

          <!-- Sign Up Form -->
          <form class="mt-6 sm:mt-8 space-y-4" onsubmit="handleSignUp(event)">
            <!-- Full Name -->
            <div>
              <label for="fullName" class="block text-sm font-medium text-black/80 mb-1.5">Full Name</label>
              <input 
                type="text" 
                id="fullName" 
                name="fullName"
                placeholder="Enter your full name"
                required
                class="w-full px-4 py-2.5 border-2 border-black/20 rounded-md text-sm focus:outline-none focus:border-black transition"
              />
              <p id="errorFullName" class="mt-1 text-xs text-red-600 hidden">Please enter at least 3 characters.</p>
            </div>

            

            <!-- Profile Picture -->
            <div>
              <label for="profilePic" class="block text-sm font-medium text-black/80 mb-1.5">Profile Picture</label>
              <div class="flex items-center gap-4">
                <div id="profilePreviewContainer" class="profile-placeholder">
                  <svg class="w-8 h-8 text-gray-400" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <path stroke-width="2" stroke-linecap="round" stroke-linejoin="round" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
                  </svg>
                </div>
                <div class="flex-1">
                  <input 
                    type="file" 
                    id="profilePic" 
                    name="profilePic"
                    accept="image/*"
                    class="hidden"
                    onchange="previewImage(event)"
                  />
                  <label 
                    for="profilePic"
                    class="inline-block cursor-pointer px-4 py-2 border-2 border-black/20 rounded-md text-sm hover:border-black transition"
                  >
                    Choose File
                  </label>
                  <p class="text-xs text-black/60 mt-1">Upload a profile picture (JPG, PNG)</p>
                </div>
              </div>
            </div>

            <!-- Email -->
            <div>
              <label for="email" class="block text-sm font-medium text-black/80 mb-1.5">Email</label>
              <input 
                type="email" 
                id="email" 
                name="email"
                placeholder="Enter your email"
                required
                class="w-full px-4 py-2.5 border-2 border-black/20 rounded-md text-sm focus:outline-none focus:border-black transition"
              />
              <p id="errorEmail" class="mt-1 text-xs text-red-600 hidden">Enter a valid email address.</p>
            </div>

            

            <!-- Password -->
            <div>
              <label for="password" class="block text-sm font-medium text-black/80 mb-1.5">Password</label>
              <div class="relative">
                <input 
                  type="password" 
                  id="password" 
                  name="password"
                  placeholder="Create a strong password"
                  required
                  class="w-full px-4 py-2.5 pr-12 border-2 border-black/20 rounded-md text-sm focus:outline-none focus:border-black transition"
                />
                <button
                  type="button"
                  id="togglePassword"
                  class="absolute right-3 top-1/2 -translate-y-1/2 text-black/50 hover:text-black transition"
                  aria-label="Toggle password visibility"
                >
                  <!-- Eye icon (hidden state) -->
                  <svg id="eyeIcon" class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <path stroke-width="2" stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
                    <path stroke-width="2" stroke-linecap="round" stroke-linejoin="round" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"/>
                  </svg>
                  <!-- Eye-off icon (visible state) -->
                  <svg id="eyeOffIcon" class="w-5 h-5 hidden" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <path stroke-width="2" stroke-linecap="round" stroke-linejoin="round" d="M3 3l18 18M10.584 10.587a2 2 0 002.828 2.83M9.363 5.365A9.466 9.466 0 0112 5c4.478 0 8.268 2.943 9.542 7a9.716 9.716 0 01-1.658 2.615m-2.615 2.616A9.466 9.466 0 0112 19c-4.478 0-8.268-2.943-9.542-7a9.716 9.716 0 013.119-5.113"/>
                  </svg>
                </button>
              </div>
              <p class="mt-1 text-xs text-black/60">Minimum 8 chars, including upper, lower, number, and symbol.</p>
              <p id="errorPassword" class="mt-1 text-xs text-red-600 hidden">Password does not meet the requirements.</p>
            </div>

            <!-- Sign Up Button -->
            <button
              type="submit"
              class="w-full inline-flex items-center justify-center gap-2 sm:gap-3 border-2 border-black bg-black text-white px-4 sm:px-5 py-2.5 sm:py-3 rounded-md text-sm sm:text-base font-medium hover:bg-brand-orange hover:border-brand-orange transition"
            >
              Sign Up
              <svg class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                <path stroke-width="2" stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7"/>
              </svg>
            </button>
          </form>

          <!-- Additional Links -->
          <div class="mt-6 flex flex-col sm:flex-row items-center justify-center gap-3 text-sm">
            <a href="login.html?force=true" class="text-black/70 hover:text-black">Already have an account? <span class="font-semibold underline">Login</span></a>
          </div>
        </div>

      <!-- Right panel -->
      <div class="relative bg-brand-orange text-black overflow-hidden min-h-[400px] lg:min-h-0">
        <div class="h-full w-full p-6 sm:p-8 lg:p-12 relative flex flex-col">
          <!-- Hands illustration -->
          <img src="Images/exam.png.png" alt="Hands illustration" class="absolute bottom-0 left-0 right-0 w-full h-auto" />
        </div>
      </div>
      </div>
      <br>
    </div>
  </section>

  <script>
    // Mobile menu toggle
    const menuToggle = document.getElementById('menuToggle');
    const closeMenu = document.getElementById('closeMenu');
    const mobileMenu = document.getElementById('mobileMenu');

    if (menuToggle) {
      menuToggle.addEventListener('click', () => {
        mobileMenu.classList.add('active');
      });
    }

    if (closeMenu) {
      closeMenu.addEventListener('click', () => {
        mobileMenu.classList.remove('active');
      });
    }

    // Close mobile menu when clicking on a link
    const mobileLinks = mobileMenu.querySelectorAll('a');
    mobileLinks.forEach(link => {
      link.addEventListener('click', () => {
        mobileMenu.classList.remove('active');
      });
    });

    // Password visibility toggle
    const togglePassword = document.getElementById('togglePassword');
    const passwordInput = document.getElementById('password');
    const eyeIcon = document.getElementById('eyeIcon');
    const eyeOffIcon = document.getElementById('eyeOffIcon');

    if (togglePassword) {
      togglePassword.addEventListener('click', () => {
        const isPassword = passwordInput.type === 'password';
        passwordInput.type = isPassword ? 'text' : 'password';
        
        if (isPassword) {
          eyeIcon.classList.add('hidden');
          eyeOffIcon.classList.remove('hidden');
        } else {
          eyeIcon.classList.remove('hidden');
          eyeOffIcon.classList.add('hidden');
        }
      });
    }

    // Preview profile image
    function previewImage(event) {
      const file = event.target.files[0];
      if (file) {
        const reader = new FileReader();
        reader.onload = function(e) {
          const container = document.getElementById('profilePreviewContainer');
          container.innerHTML = `<img src="${e.target.result}" alt="Profile preview" class="profile-preview" />`;
        };
        reader.readAsDataURL(file);
      }
    }

    function hide(el){ if(el){ el.classList.add('hidden'); } }
    function show(el){ if(el){ el.classList.remove('hidden'); } }
    function validateEmail(email){ return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email); }
    function validateInternId(id){ return /^[a-zA-Z0-9]{3,20}$/.test(id); }
    function validatePassword(pw){
      if (!pw || pw.length < 8) return false;
      const hasUpper = /[A-Z]/.test(pw);
      const hasLower = /[a-z]/.test(pw);
      const hasDigit = /\d/.test(pw);
      const hasSymbol = /[^A-Za-z0-9]/.test(pw);
      return hasUpper && hasLower && hasDigit && hasSymbol;
    }
    // Password hashing with fallback when crypto.subtle is unavailable (e.g., file://)
    async function hashPassword(text){
      try {
        if (window.crypto && window.crypto.subtle) {
          const data = new TextEncoder().encode(text);
          const hash = await window.crypto.subtle.digest('SHA-256', data);
          return Array.from(new Uint8Array(hash)).map(b => b.toString(16).padStart(2,'0')).join('');
        }
      } catch {}
      // Fallback: FNV-1a 32-bit hex (not cryptographically secure; used only to avoid runtime errors offline)
      let h = 0x811c9dc5;
      for (let i = 0; i < text.length; i++) {
        h ^= text.charCodeAt(i);
        h = (h + ((h << 1) + (h << 4) + (h << 7) + (h << 8) + (h << 24))) >>> 0;
      }
      return ('00000000' + h.toString(16)).slice(-8);
    }

    // Handle sign up form submission (client-side, using localStorage)
    async function handleSignUp(event) {
      event.preventDefault();
      const fullName = document.getElementById('fullName').value.trim();
      const email = document.getElementById('email').value.trim().toLowerCase();
      const password = document.getElementById('password').value;
      const profileFileInput = document.getElementById('profilePic');
      
      // Clear errors
      hide(document.getElementById('errorFullName'));
      hide(document.getElementById('errorEmail'));
      hide(document.getElementById('errorPassword'));

      // Field validations
      let hasError = false;
      if (fullName.length < 3) { show(document.getElementById('errorFullName')); hasError = true; }
      if (!validateEmail(email)) { show(document.getElementById('errorEmail')); hasError = true; }
      if (!validatePassword(password)) { show(document.getElementById('errorPassword')); hasError = true; }
      if (hasError) { return; }

      // Convert selected profile image to data URL (if any) for storage
      const file = profileFileInput.files && profileFileInput.files[0];
      const saveUser = (profileDataUrl) => {
        const users = JSON.parse(localStorage.getItem('interns_users') || '[]');

        // Prevent duplicates by email
        const duplicate = users.find(u => u.email === email);
        if (duplicate) {
          alert('An account with this Email already exists. Please login.');
          window.location.href = 'login.html';
          return;
        }

        const newUser = {
          id: crypto.randomUUID ? crypto.randomUUID() : String(Date.now()),
          fullName,
          email,
          department: null,
          passwordHash: window.__pwHash, // store hash
          profilePicDataUrl: profileDataUrl || null,
          createdAt: new Date().toISOString()
        };

        users.push(newUser);
        localStorage.setItem('interns_users', JSON.stringify(users));

        // Optionally sign them in immediately; here we redirect to login
        alert('Account created successfully. Please login.');
        window.location.href = 'login.html';
      };

      // Compute password hash first
      window.__pwHash = await hashPassword(password);

      if (file) {
        const reader = new FileReader();
        reader.onload = function(e) {
          saveUser(e.target.result);
        };
        reader.readAsDataURL(file);
      } else {
        saveUser(null);
      }
    }

    // Add hover effect to buttons
    const ctaButtons = document.querySelectorAll('button[type="submit"]');
    ctaButtons.forEach(btn => {
      btn.addEventListener('mouseenter', () => btn.classList.add('scale-[1.02]'));
      btn.addEventListener('mouseleave', () => btn.classList.remove('scale-[1.02]'));
    });
  </script>
</body>
</html>