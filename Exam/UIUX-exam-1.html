<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>UI/UX Design â€” Introduction Level: Final Examination</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <style>
    * { font-family: 'Inter', sans-serif; box-sizing: border-box; }
    body { -webkit-font-smoothing: antialiased; background-color: #f5f7fa; }
    .option-btn {
      transition: all 0.2s ease;
      cursor: pointer;
      background: #f0f3f7;
      border: 2px solid transparent;
    }
    .option-btn:hover:not(.disabled) {
      background: #e8edf3;
      border-color: #0066ff;
    }
    .option-btn.selected {
      background: #e8f4ff;
      border-color: #0066ff;
    }
    .progress-indicator {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 8px 12px;
      border-radius: 8px;
      font-size: 14px;
      font-weight: 500;
    }
    .progress-indicator.current {
      background: #fff;
      border: 2px solid #0066ff;
      color: #0066ff;
    }
    .progress-indicator.answered {
      background: #d4edda;
      color: #28a745;
    }
    .progress-indicator.unanswered {
      background: #fff;
      border: 2px solid #e0e6ed;
      color: #6c757d;
    }
    ::-webkit-scrollbar { width: 6px; }
    ::-webkit-scrollbar-thumb { background: #0066ff; border-radius: 3px; }
    
    /* Responsive Sidebar */
    @media (max-width: 1024px) {
      .sidebar-desktop {
        display: none;
      }
      .sidebar-mobile {
        display: block;
      }
    }
    @media (min-width: 1025px) {
      .sidebar-desktop {
        display: block;
      }
      .sidebar-mobile {
        display: none;
      }
    }
    
    /* Mobile navigation buttons */
    @media (max-width: 640px) {
      #navigationButtons button {
        padding: 10px 16px;
        font-size: 14px;
      }
      #submitBtn {
        padding: 12px 24px;
        font-size: 14px;
      }
    }
  </style>
</head>
<body>

<div class="max-w-7xl mx-auto px-4 sm:px-6 py-4 sm:py-8">
  <div class="flex flex-col lg:flex-row gap-4 sm:gap-8">
    <!-- MAIN CONTENT -->
    <main class="flex-1 w-full lg:w-auto order-2 lg:order-1">
      <div class="mb-4 sm:mb-6">
        <h2 class="text-xl sm:text-2xl lg:text-3xl font-bold text-gray-900 mb-3 sm:mb-4">UI/UX Design â€” Introduction Level: Final Examination</h2>
        <div class="relative">
          <div class="h-3 bg-gray-200 rounded-full overflow-hidden">
            <div id="mainProgressBar" class="h-full bg-blue-600 transition-all duration-300" style="width: 0%"></div>
          </div>
          <span id="progressPercent" class="absolute -top-1 right-0 text-sm font-semibold text-gray-900">0%</span>
        </div>
      </div>
      <div id="questionContainer" class="bg-white rounded-lg p-4 sm:p-6 lg:p-8 shadow-sm mb-4 sm:mb-6"></div>
      <div id="navigationButtons" class="flex justify-between gap-3">
        <button id="btnPrevious" class="px-4 sm:px-6 py-2.5 border-2 border-blue-600 text-blue-600 rounded-lg font-semibold hover:bg-blue-50 transition-all">Previous</button>
        <button id="btnNext" class="px-4 sm:px-6 py-2.5 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 transition-all">Next</button>
      </div>
      <div id="submitSection" class="hidden mt-4 sm:mt-6 text-center">
        <button id="submitBtn" class="px-6 sm:px-8 py-2.5 sm:py-3 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 transition-all shadow-lg">Submit Exam</button>
      </div>
      <div id="resultsSection" class="hidden bg-white rounded-lg p-4 sm:p-6 lg:p-8 shadow-sm">
        <div class="text-center mb-6">
          <div class="inline-block p-4 bg-green-100 rounded-full mb-4">
            <svg class="w-12 h-12 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
            </svg>
          </div>
          <h3 class="text-xl sm:text-2xl font-bold text-gray-900 mb-2">Exam Completed!</h3>
          <p class="text-sm sm:text-base text-gray-600">You've answered <span id="correctCount" class="font-semibold text-green-600">0</span> out of <span id="totalQuestions">25</span> questions correctly.</p>
        </div>
        <div class="space-y-3 mb-6">
          <div class="flex justify-between text-gray-700 text-sm sm:text-base">
            <span>Total Score:</span>
            <span class="font-semibold"><span id="totalMarks">0</span>/50 Marks</span>
          </div>
          <div class="flex justify-between text-gray-700 text-sm sm:text-base">
            <span>Percentage:</span>
            <span class="font-semibold"><span id="percentage">0</span>%</span>
          </div>
        </div>
        <div id="passMessage" class="hidden mb-6 p-4 bg-green-50 rounded-lg border border-green-200">
          <p class="text-green-800 font-medium text-center text-sm sm:text-base">ðŸŽ‰ Congratulations! You passed the exam!</p>
        </div>
        <div id="failMessage" class="hidden mb-6 p-4 bg-red-50 rounded-lg border border-red-200">
          <p class="text-red-800 font-medium text-center text-sm sm:text-base">Keep practicing! You need 70% to pass.</p>
        </div>
        <div class="flex flex-col sm:flex-row gap-3 justify-center">
          <button id="retakeBtn" class="px-6 py-2.5 border-2 border-blue-600 text-blue-600 rounded-lg font-semibold hover:bg-blue-50 transition-all">Retake Exam</button>
          <button id="certificateBtn" class="hidden px-6 py-2.5 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 transition-all">Download Certificate</button>
        </div>
      </div>
    </main>
    
    <!-- SIDEBAR DESKTOP (lg and up) -->
    <aside class="sidebar-desktop w-full lg:w-80 flex-shrink-0 order-1 lg:order-2">
      <div class="bg-blue-50 rounded-lg p-6 mb-6 text-center">
        <div class="text-5xl font-bold text-blue-600 mb-2" id="scoreDisplay">0%</div>
        <p class="text-sm text-gray-600">You got <span id="answeredCount">0</span> answers correct</p>
      </div>
      <div id="timerCard" class="bg-white rounded-lg p-4 mb-6 shadow-sm">
        <div class="flex items-center justify-between">
          <span class="text-sm font-medium text-gray-700">Time Remaining</span>
          <span id="timer" class="text-xl font-bold text-gray-900">75:00</span>
        </div>
      </div>
      <div class="bg-white rounded-lg p-4 shadow-sm">
        <h3 class="text-sm font-semibold text-gray-900 mb-4">Question Progress</h3>
        <div id="questionProgress" class="space-y-2 max-h-96 overflow-y-auto"></div>
      </div>
    </aside>
    
    <!-- SIDEBAR MOBILE (below lg) -->
    <aside class="sidebar-mobile w-full order-1 lg:order-2">
      <div class="grid grid-cols-2 gap-3 sm:gap-4 mb-4">
        <div class="bg-blue-50 rounded-lg p-4 text-center">
          <div class="text-3xl sm:text-4xl font-bold text-blue-600 mb-1" id="scoreDisplayMobile">0%</div>
          <p class="text-xs sm:text-sm text-gray-600"><span id="answeredCountMobile">0</span> correct</p>
        </div>
        <div id="timerCardMobile" class="bg-white rounded-lg p-4 shadow-sm text-center">
          <span class="text-xs sm:text-sm font-medium text-gray-700 block mb-1">Time Left</span>
          <span id="timerMobile" class="text-2xl sm:text-3xl font-bold text-gray-900">75:00</span>
        </div>
      </div>
      <div class="bg-white rounded-lg p-4 shadow-sm mb-4">
        <h3 class="text-sm font-semibold text-gray-900 mb-3">Question Progress</h3>
        <div id="questionProgressMobile" class="grid grid-cols-5 sm:grid-cols-7 md:grid-cols-10 gap-2"></div>
      </div>
    </aside>
  </div>
</div>

<script>
const mcqData = [
  { q: "What is the main goal of UX Design?", opts: ["To make products look beautiful", "To ensure users have a seamless and meaningful experience", "To develop backend logic", "To create brand logos"], ans: "To ensure users have a seamless and meaningful experience", marks: 2 },
  { q: "Which of the following best describes UI Design?", opts: ["How a product feels", "How a product looks and interacts visually", "How fast a website loads", "The coding part of design"], ans: "How a product looks and interacts visually", marks: 2 },
  { q: "Which of the following correctly represents the 5 stages of Design Thinking?", opts: ["Research â†’ Create â†’ Test â†’ Deploy â†’ Market", "Empathize â†’ Define â†’ Ideate â†’ Prototype â†’ Test", "Discover â†’ Design â†’ Deliver â†’ Debug â†’ Deploy", "Define â†’ Develop â†’ Deliver â†’ Design â†’ Debug"], ans: "Empathize â†’ Define â†’ Ideate â†’ Prototype â†’ Test", marks: 2 },
  { q: "The principle of Hierarchy in design is used to:", opts: ["Randomize all elements", "Arrange elements by importance to guide attention", "Reduce readability", "Avoid spacing"], ans: "Arrange elements by importance to guide attention", marks: 2 },
  { q: "Which color combination ensures maximum readability for text?", opts: ["Light gray text on white background", "Yellow text on green background", "Black text on white background", "White text on yellow background"], ans: "Black text on white background", marks: 2 },
  { q: "White space in design is also known as:", opts: ["Negative space", "Empty error zone", "Design waste", "Text padding"], ans: "Negative space", marks: 2 },
  { q: "In Figma, Components are used to:", opts: ["Add animations", "Reuse design elements consistently", "Change screen color", "Export files only"], ans: "Reuse design elements consistently", marks: 2 },
  { q: "Which of the following ensures accessibility in design?", opts: ["Using small text for all users", "Maintaining color contrast and alt text for images", "Using bright colors only", "Removing keyboard navigation"], ans: "Maintaining color contrast and alt text for images", marks: 2 },
  { q: "Alt Text is primarily used to:", opts: ["Add animations", "Describe images for screen readers", "Improve typography", "Create buttons"], ans: "Describe images for screen readers", marks: 2 },
  { q: "A developer handoff is important because:", opts: ["Designers finalize colors", "Developers understand and implement the intended visuals and interactions", "It ends the project permanently", "Designers test code"], ans: "Developers understand and implement the intended visuals and interactions", marks: 2 }
];

const fillData = [
  { q: "UX stands for __________ Experience.", ans: ["User"], marks: 1 },
  { q: "The process of understanding user needs deeply is called __________.", ans: ["empathy", "empathizing", "user research", "empathise"], marks: 1 },
  { q: "In design, contrast helps to make important elements __________.", ans: ["stand out", "visible", "prominent", "noticeable"], marks: 1 },
  { q: "Figma uses frames to create structured layouts similar to __________.", ans: ["artboards", "pages", "canvases"], marks: 1 },
  { q: "Designing for users with disabilities or limitations is known as __________ design.", ans: ["accessible", "accessibility", "inclusive"], marks: 1 }
];

const tfData = [
  { q: "Good UX design focuses only on visuals, not usability.", ans: "FALSE", marks: 1 },
  { q: "Accessibility is only necessary for government websites.", ans: "FALSE", marks: 1 },
  { q: "Typography influences readability and user perception.", ans: "TRUE", marks: 1 },
  { q: "In Figma, grids help maintain alignment and visual balance.", ans: "TRUE", marks: 1 },
  { q: "Developer handoff includes exporting design assets and sharing specifications.", ans: "TRUE", marks: 1 }
];

const codeData = [
  { q: "Design Thinking Scenario: You are designing a mental wellness app for teens. Describe how you would apply the 5 stages of Design Thinking in brief (Empathize â†’ Define â†’ Ideate â†’ Prototype â†’ Test).", ans: ["empathize", "define", "ideate", "prototype", "test"], marks: 4, type: "text" },
  { q: "Visual Design Application: Given the following screen elements: Heading, Description, CTA Button. Explain how you would arrange them to achieve visual hierarchy and balance. Include notes on spacing, alignment, and color choice.", ans: ["hierarchy", "spacing", "alignment", "color", "cta", "heading", "description"], marks: 4, type: "text" },
  { q: "Figma Practical: List the steps to create a reusable Button Component in Figma and how to update all instances later.", ans: ["component", "create", "button", "instance", "update", "main"], marks: 4, type: "text" },
  { q: "Accessibility Check: A user with color blindness struggles to distinguish between your success and error messages (green & red). What 2â€“3 design adjustments would you make to improve accessibility?", ans: ["icon", "label", "pattern", "contrast", "text", "shape"], marks: 4, type: "text" },
  { q: "Developer Handoff Simulation: You've designed a login screen in Figma. What key information and exports should you hand over to the developer to ensure accurate implementation?", ans: ["specifications", "assets", "colors", "fonts", "spacing", "export", "handoff"], marks: 4, type: "text" }
];

const allQuestions = [
  ...mcqData.map((q, i) => ({...q, section: 'mcq', index: i})),
  ...fillData.map((q, i) => ({...q, section: 'fill', index: i})),
  ...tfData.map((q, i) => ({...q, section: 'tf', index: i})),
  ...codeData.map((q, i) => ({...q, section: 'code', index: i}))
];

let currentQuestionIndex = 0;
let userAnswers = {};
let examDuration = 75 * 60;
let timerInterval;
let examSubmitted = false;
const totalQuestionsCount = allQuestions.length;

const questionContainer = document.getElementById('questionContainer');
const questionProgress = document.getElementById('questionProgress');
const questionProgressMobile = document.getElementById('questionProgressMobile');
const mainProgressBar = document.getElementById('mainProgressBar');
const progressPercent = document.getElementById('progressPercent');
const scoreDisplay = document.getElementById('scoreDisplay');
const scoreDisplayMobile = document.getElementById('scoreDisplayMobile');
const answeredCount = document.getElementById('answeredCount');
const answeredCountMobile = document.getElementById('answeredCountMobile');
const timerEl = document.getElementById('timer');
const timerMobile = document.getElementById('timerMobile');
const timerCard = document.getElementById('timerCard');
const timerCardMobile = document.getElementById('timerCardMobile');
const btnPrevious = document.getElementById('btnPrevious');
const btnNext = document.getElementById('btnNext');
const navigationButtons = document.getElementById('navigationButtons');
const submitSection = document.getElementById('submitSection');
const submitBtn = document.getElementById('submitBtn');
const resultsSection = document.getElementById('resultsSection');
const correctCountEl = document.getElementById('correctCount');
const totalQuestionsEl = document.getElementById('totalQuestions');
const totalMarksEl = document.getElementById('totalMarks');
const percentageEl = document.getElementById('percentage');
const passMessage = document.getElementById('passMessage');
const failMessage = document.getElementById('failMessage');
const retakeBtn = document.getElementById('retakeBtn');
const certificateBtn = document.getElementById('certificateBtn');

const escapeHTML = str => String(str).replace(/[&<>"']/g, m => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'})[m]);

function formatTime(seconds) {
  const mins = Math.floor(seconds / 60);
  const secs = seconds % 60;
  return `${mins}:${secs.toString().padStart(2, '0')}`;
}

function startTimer() {
  timerInterval = setInterval(() => {
    examDuration--;
    const timeStr = formatTime(examDuration);
    timerEl.textContent = timeStr;
    timerMobile.textContent = timeStr;
    if (examDuration <= 300) {
      timerEl.classList.add('text-red-600', 'font-bold');
      timerMobile.classList.add('text-red-600', 'font-bold');
    }
    if (examDuration <= 0) {
      clearInterval(timerInterval);
      alert(' Time is up! Your exam will be auto-submitted.');
      submitExam();
    }
  }, 1000);
}

function stopTimer() { if (timerInterval) clearInterval(timerInterval); }

function updateProgress() {
  const answered = Object.keys(userAnswers).filter(key => userAnswers[key] && userAnswers[key].toString().trim() !== '').length;
  const percent = Math.round((answered / totalQuestionsCount) * 100);
  mainProgressBar.style.width = percent + '%';
  progressPercent.textContent = percent + '%';
  scoreDisplay.textContent = percent + '%';
  scoreDisplayMobile.textContent = percent + '%';
  answeredCount.textContent = answered;
  answeredCountMobile.textContent = answered;
  renderQuestionProgress();
}

function renderQuestionProgress() {
  // Desktop progress
  questionProgress.innerHTML = '';
  allQuestions.forEach((q, idx) => {
    const key = q.section + q.index;
    const hasAnswer = userAnswers[key] && userAnswers[key].toString().trim() !== '';
    const div = document.createElement('div');
    div.className = 'progress-indicator';
    if (idx === currentQuestionIndex) div.classList.add('current');
    else if (hasAnswer) div.classList.add('answered');
    else div.classList.add('unanswered');
    const icon = document.createElement('span');
    icon.innerHTML = `<svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20"><circle cx="10" cy="10" r="3"/></svg>`;
    const text = document.createElement('span');
    text.textContent = `Question ${idx + 1}`;
    div.appendChild(icon);
    div.appendChild(text);
    div.style.cursor = 'pointer';
    div.addEventListener('click', () => {
      if (!examSubmitted) {
        currentQuestionIndex = idx;
        renderQuestion();
        updateNavButtons();
        updateProgress();
      }
    });
    questionProgress.appendChild(div);
  });
  
  // Mobile progress (compact grid)
  questionProgressMobile.innerHTML = '';
  allQuestions.forEach((q, idx) => {
    const key = q.section + q.index;
    const hasAnswer = userAnswers[key] && userAnswers[key].toString().trim() !== '';
    const btn = document.createElement('button');
    btn.className = 'aspect-square rounded-lg font-semibold text-xs transition-all';
    btn.textContent = idx + 1;
    
    if (idx === currentQuestionIndex) {
      btn.className += ' bg-blue-600 text-white border-2 border-blue-700';
    } else if (hasAnswer) {
      btn.className += ' bg-green-100 text-green-700 border-2 border-green-300';
    } else {
      btn.className += ' bg-gray-100 text-gray-600 border-2 border-gray-300';
    }
    
    btn.addEventListener('click', () => {
      if (!examSubmitted) {
        currentQuestionIndex = idx;
        renderQuestion();
        updateNavButtons();
        updateProgress();
        window.scrollTo({ top: 0, behavior: 'smooth' });
      }
    });
    questionProgressMobile.appendChild(btn);
  });
}

function renderQuestion() {
  const q = allQuestions[currentQuestionIndex];
  const key = q.section + q.index;
  const savedAnswer = userAnswers[key] || '';
  let html = `<div class="mb-4 sm:mb-6">
    <p class="text-xs sm:text-sm font-semibold text-gray-500 mb-2">Question ${currentQuestionIndex + 1}/${totalQuestionsCount}</p>
    <h3 class="text-base sm:text-lg lg:text-xl font-bold text-gray-900 mb-3 sm:mb-4 whitespace-pre-wrap leading-relaxed">${escapeHTML(q.q)}</h3>
    ${q.marks > 1 ? `<p class="text-xs sm:text-sm text-blue-600 font-medium mb-3 sm:mb-4">${q.marks} Marks</p>` : ''}
  </div>`;
  if (q.section === 'mcq') {
    html += '<div class="space-y-2 sm:space-y-3">';
    q.opts.forEach(opt => {
      const isSelected = savedAnswer === opt;
      html += `<div class="option-btn ${isSelected ? 'selected' : ''} ${examSubmitted ? 'disabled' : ''} rounded-lg p-3 sm:p-4 text-sm sm:text-base" data-value="${escapeHTML(opt)}">${escapeHTML(opt)}</div>`;
    });
    html += '</div>';
  } else if (q.section === 'fill') {
    html += `<div><input type="text" id="fillInput" value="${escapeHTML(savedAnswer)}" placeholder="Type your answer here..." class="w-full px-3 sm:px-4 py-2 sm:py-3 text-sm sm:text-base border-2 border-gray-200 rounded-lg focus:outline-none focus:border-blue-600 transition-all" ${examSubmitted ? 'disabled' : ''} /></div>`;
  } else if (q.section === 'tf') {
    html += `<div class="space-y-2 sm:space-y-3">`;
    ["TRUE", "FALSE"].forEach(opt => {
      const isSelected = savedAnswer === opt;
      html += `<div class="option-btn ${isSelected ? 'selected' : ''} ${examSubmitted ? 'disabled' : ''} rounded-lg p-3 sm:p-4 text-sm sm:text-base" data-value="${opt}">${opt}</div>`;
    });
    html += '</div>';
  } else if (q.section === 'code') {
    html += `<div><label class="block text-xs sm:text-sm font-medium text-gray-700 mb-2">Answer:</label><textarea id="codeInput" rows="6" placeholder="Write your answer here..." class="w-full px-3 sm:px-4 py-2 sm:py-3 text-sm border-2 border-gray-200 rounded-lg font-mono resize-y focus:outline-none focus:border-blue-600 transition-all" ${examSubmitted ? 'disabled' : ''}>${escapeHTML(savedAnswer)}</textarea></div>`;
  }
  questionContainer.innerHTML = html;

  if (!examSubmitted) {
    if (q.section === 'mcq' || q.section === 'tf') {
      questionContainer.querySelectorAll('.option-btn').forEach(btn => {
        btn.addEventListener('click', function() {
          if (examSubmitted) return;
          questionContainer.querySelectorAll('.option-btn').forEach(b => b.classList.remove('selected'));
          this.classList.add('selected');
          userAnswers[key] = this.dataset.value;
          updateProgress();
        });
      });
    } else if (q.section === 'fill') {
      const input = document.getElementById('fillInput');
      input.addEventListener('input', function() {
        userAnswers[key] = this.value.trim();
        updateProgress();
      });
    } else if (q.section === 'code') {
      const textarea = document.getElementById('codeInput');
      textarea.addEventListener('input', function() {
        userAnswers[key] = this.value.trim();
        updateProgress();
      });
    }
  }
}

function updateNavButtons() {
  btnPrevious.disabled = currentQuestionIndex === 0;
  btnNext.disabled = currentQuestionIndex === totalQuestionsCount - 1;
  if (currentQuestionIndex === 0) btnPrevious.classList.add('opacity-50', 'cursor-not-allowed');
  else btnPrevious.classList.remove('opacity-50', 'cursor-not-allowed');
  if (currentQuestionIndex === totalQuestionsCount - 1) {
    btnNext.classList.add('hidden');
    submitSection.classList.remove('hidden');
  } else {
    btnNext.classList.remove('hidden');
    submitSection.classList.add('hidden');
  }
}

function checkAnswer(q, userAns) {
  let isCorrect = false, marks = 0;
  if (q.section === 'mcq' || q.section === 'tf') {
    isCorrect = userAns === q.ans;
    marks = isCorrect ? q.marks : 0;
  } else if (q.section === 'fill') {
    const normalized = (userAns || '').toLowerCase().trim();
    isCorrect = q.ans.some(a => normalized.includes(a.toLowerCase()));
    marks = isCorrect ? q.marks : 0;
  } else if (q.section === 'code') {
    const normalized = (userAns || '').toLowerCase();
    const matchCount = q.ans.filter(keyword => normalized.includes(keyword.toLowerCase())).length;
    marks = Math.floor((matchCount / q.ans.length) * q.marks);
    isCorrect = marks > 0;
  }
  return { isCorrect, marks };
}

function submitExam() {
  if (examSubmitted) return;
  const unanswered = totalQuestionsCount - Object.keys(userAnswers).filter(k => userAnswers[k] && userAnswers[k].toString().trim() !== '').length;
  if (unanswered > 0) {
    if (!confirm(`You have ${unanswered} unanswered question(s). Do you want to submit anyway?`)) return;
  }
  examSubmitted = true;
  stopTimer();
  let correctCount = 0, totalMarks = 0;
  allQuestions.forEach(q => {
    const key = q.section + q.index;
    const result = checkAnswer(q, userAnswers[key]);
    totalMarks += result.marks;
    if (result.isCorrect) correctCount++;
  });
  const percentage = Math.round((correctCount / totalQuestionsCount) * 100);
  correctCountEl.textContent = correctCount;
  totalQuestionsEl.textContent = totalQuestionsCount;
  totalMarksEl.textContent = totalMarks;
  percentageEl.textContent = percentage;
  if (percentage >= 70) {
    passMessage.classList.remove('hidden');
    failMessage.classList.add('hidden');
    certificateBtn.classList.remove('hidden');
  } else {
    passMessage.classList.add('hidden');
    failMessage.classList.remove('hidden');
    certificateBtn.classList.add('hidden');
  }
  questionContainer.classList.add('hidden');
  navigationButtons.classList.add('hidden');
  submitSection.classList.add('hidden');
  timerCard.classList.add('hidden');
  timerCardMobile.classList.add('hidden');
  resultsSection.classList.remove('hidden');
  window.scrollTo({ top: 0, behavior: 'smooth' });
}

function generateCertificate() {
  const userName = prompt("Enter your name for the certificate:");
  if (!userName || userName.trim() === '') return alert('Name is required to generate certificate.');
  
  const { jsPDF } = window.jspdf;
  const doc = new jsPDF('portrait');
  
  // White background
  doc.setFillColor(255, 255, 255);
  doc.rect(0, 0, 210, 297, 'F');
  
  // Colorful header bar - thin stripes at top
  const colors = [
    [123, 44, 191],  // Purple
    [59, 130, 246],  // Blue  
    [239, 68, 68],   // Red
    [249, 115, 22],  // Orange
    [234, 179, 8],   // Yellow
    [34, 197, 94]    // Green
  ];
  
  const barWidth = 210 / colors.length;
  colors.forEach((color, i) => {
    doc.setFillColor(color[0], color[1], color[2]);
    doc.rect(i * barWidth, 0, barWidth, 5, 'F');
  });
  
  // Large "Certificate" text on left side
  doc.setFont('helvetica', 'bold');
  doc.setFontSize(45);
  doc.setTextColor(0, 0, 0);
  doc.text("Certificate", 25, 48);
  doc.text("", 25, 73);
  
  // Vertical colored stripe on right
  doc.setFillColor(123, 44, 191); // Purple
  doc.rect(130, 28, 3, 35, 'F');
  doc.setFillColor(239, 68, 68); // Red
  doc.rect(134, 28, 3, 35, 'F');
  doc.setFillColor(249, 115, 22); // Orange
  doc.rect(138, 28, 3, 35, 'F');
  
  // Recognition text box on right - properly positioned within certificate
  doc.setFont('helvetica', 'normal');
  doc.setFontSize(10);
  doc.setTextColor(80, 80, 80);
  const recognitionLines = [
    "In recognition of",
    "your excellent completion of the",
    "course in UI/UX Design - Introduction,",
    "and demonstrating great",
    "skills in practical courses."
  ];
  let yPos = 35;
  recognitionLines.forEach(line => {
    doc.text(line, 145, yPos);
    yPos += 5;
  });
  
  // "Awarded to" label - lighter and smaller
  doc.setFont('helvetica', 'normal');
  doc.setFontSize(10);
  doc.setTextColor(140, 140, 140);
  doc.text("Awarded to", 25, 115);
  
  // Name with underline - larger and bold
  doc.setFont('helvetica', 'bold');
  doc.setFontSize(22);
  doc.setTextColor(0, 0, 0);
  doc.text(userName, 25, 135);
  
  // Underline for name - thin and elegant
  doc.setDrawColor(200, 200, 200);
  doc.setLineWidth(0.5);
  doc.line(25, 138, 190, 138);
  
  // Score information - clean and visible
  const score = totalMarksEl.textContent;
  const percent = percentageEl.textContent;
  doc.setFont('helvetica', 'normal');
  doc.setFontSize(9);
  doc.setTextColor(80, 80, 80);
  doc.text(`Score: ${score}/50 Marks (${percent}%)`, 25, 150);
  
  // Date - below score
  const today = new Date().toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' });
  doc.setFont('helvetica', 'normal');
  doc.setFontSize(8);
  doc.setTextColor(140, 140, 140);
  doc.text(today, 25, 162);
  
  // Attribution on right - at the bottom
  doc.setFontSize(8);
  doc.setTextColor(160, 160, 160);
  doc.text("Elavana - By InnerWhispers", 185, 162, { align: 'right' });
  
  // Abstract geometric pattern at bottom - adjusted positions
  // Large purple rectangle left
  doc.setFillColor(123, 44, 191);
  doc.rect(18, 200, 28, 75, 'F');
  
  // Orange circle top middle
  doc.setFillColor(249, 115, 22);
  doc.circle(115, 215, 18, 'F');
  
  // Orange rectangle top right
  doc.rect(145, 200, 26, 26, 'F');
  
  // Blue circle left middle
  doc.setFillColor(59, 130, 246);
  doc.circle(72, 238, 20, 'F');
  
  // Large light purple circle bottom left
  doc.setFillColor(216, 180, 254);
  doc.circle(52, 255, 28, 'F');
  
  // Large blue circle bottom right
  doc.setFillColor(147, 197, 253);
  doc.circle(165, 245, 26, 'F');
  
  // Dark navy rectangles
  doc.setFillColor(30, 41, 59);
  doc.rect(50, 200, 15, 15, 'F');
  doc.rect(92, 200, 13, 13, 'F');
  doc.rect(98, 252, 18, 23, 'F');
  
  // Purple rectangle bottom right
  doc.setFillColor(139, 92, 246);
  doc.rect(135, 250, 20, 25, 'F');
  
  // Small orange squares
  doc.setFillColor(251, 146, 60);
  doc.rect(127, 265, 11, 10, 'F');
  
  doc.save(`Certificate_${userName.replace(/\s+/g, '_')}.pdf`);
  alert('Certificate downloaded successfully!');
}

btnPrevious.addEventListener('click', () => {
  if (currentQuestionIndex > 0) {
    currentQuestionIndex--;
    renderQuestion();
    updateNavButtons();
    updateProgress();
    window.scrollTo({ top: 0, behavior: 'smooth' });
  }
});
btnNext.addEventListener('click', () => {
  if (currentQuestionIndex < totalQuestionsCount - 1) {
    currentQuestionIndex++;
    renderQuestion();
    updateNavButtons();
    updateProgress();
    window.scrollTo({ top: 0, behavior: 'smooth' });
  }
});
submitBtn.addEventListener('click', submitExam);
retakeBtn.addEventListener('click', () => location.reload());
certificateBtn.addEventListener('click', generateCertificate);

function init() {
  renderQuestion();
  updateNavButtons();
  updateProgress();
  startTimer();
  window.addEventListener('beforeunload', (e) => {
    if (!examSubmitted) {
      e.preventDefault();
      e.returnValue = '';
    }
  });
}
init();
</script>

</body>
</html>